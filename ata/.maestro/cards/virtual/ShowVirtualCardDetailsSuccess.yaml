appId: com.nymcard.masaar

tags:
  - cards
  - success
  - virtual_card
---
# Load element definition POM for cards
- runFlow:
    label: Load element definitions for cards
    commands:
      - runScript:
          # Load element mapping for the cards module
          file: ../../elements/cards.js

# Perform standard login
- runFlow:
    file: ../../auth/login/LoginSuccess.yaml
    env:
      PHONE: "508655686"
      PASSCODE: "888555"

- assertVisible:
    label: Verify My Card tile visible on Home screen
    id: ${output.cards.homeCardTile}

- tapOn:
    label: Tap card tile to navigate to card details screen
    id: ${output.cards.homeCardTile}

- assertNotVisible:
    label: Confirm card is virtual by checking chip/NFC not present
    id: ${output.cards.cardChipAndNFC}

- assertVisible:
    label: Verify card is active with details displayed
    id: ${output.cards.cardStatePresent}

- assertVisible:
    label: Verify Show Card details button visible
    id: ${output.cards.showDetailsButton}

- tapOn:
    label: Tap Show Card details button to reveal card information
    id: ${output.cards.showDetailsButton}

- tapOn:
    label: Focus passcode input field
    id: ${output.login.codeField}

- inputText:
    label: Enter valid passcode
    text: "888555"

- hideKeyboard:
    label: Hide keyboard after passcode entry

- assertVisible:
    label: Verify continue button enabled after passcode entry
    id: ${output.login.continueButton}
    enabled: true

- tapOn:
    label: Submit passcode to authenticate card action
    id: ${output.login.continueButton}

- assertVisible:
    label: Verify card number is displayed after authentication
    id: ${output.cards.cardNumberVisible}

- assertVisible:
    label: Verify card expiry is displayed after authentication
    id: ${output.cards.cardExpiryVisible}

- assertVisible:
    label: Verify CVV is displayed after authentication
    id: ${output.cards.cvvVisible}

- assertVisible:
    label: Verify Show button changed to Hide details button
    id: ${output.cards.hideDetailsButton}

- assertVisible:
    label: Verify Copy Card number button visible
    id: ${output.cards.copyCard}

- tapOn:
    label: Tap Copy Card number button to copy card details
    id: ${output.cards.copyCard}

# Capture screenshots of the revealed card details
- runFlow:
    label: Take Android Show Card details screenshot
    when:
      platform: android
    commands:
      - takeScreenshot: ShowVirtualCardDetailsAndroid

- runFlow:
    label: Take iOS Show Card details screenshot
    when:
      platform: ios
    commands:
      - takeScreenshot: ShowVirtualCardDetailIOS
